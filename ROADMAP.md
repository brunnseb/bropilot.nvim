# Roadmap

- [x] show suggestion as virtual text
- [x] accept line
- [x] accept block
- [x] progress while suggesting
- [x] cleanup current code
- [x] skip suggestion if text after cursor (except if just moving?)
- [x] fix: accepting line resets suggestion
- [x] fix: remove additional newlines at end of suggestion
- [x] fix: sometimes the suggestion is not cancelled even tho inserted text doesn't match
- [x] improve init
- [x] rewrite async handling and use callbacks to avoid timing problems
- [x] rejoin model & tag
- [x] fix: partial accept + newline => doesn't clear suggestion
- [x] fix: sometimes the pid is already killed
- [x] fix: notify non existent model
- [x] some lua callbacks in async process, need to use scheduler (async util function)
- [x] wait for model to be ready before trying to suggest (does ollama api provide that info? -> using preload)
- [x] check that suggestion is created after model finishes preload
- [x] notify on ollama api errors
- [x] keep subsequent suggestions in memory
- [x] accepting block resets suggestions
- [x] refactor everything
- [x] fix: keep same suggestion when partially accepting
- [x] custom init options
  - [x] model
  - [x] ~~tag~~
  - [x] prompt (assert if unknown model)
  - [x] debounce time
  - [x] pull model if missing
  - [x] show progress
  - [x] keep n suggestion blocks in memory
  - [x] ollama params
  - [x] ~~commands model~~ (aborted, partly due to fim models not working for chatting)
- [x] check if model is listed in ollama api
- [x] pull model if not listed (behind option)
- [x] replace unix sleep with async job
- [x] accept word
- [x] avoid adding newline on accept if no next suggestion
- [x] store context line number to avoid rerendering same suggestion on other lines
- [x] when accepting word that is whitespace only, skip to next word
- [ ] no suggest in cmd or other mode
- [ ] handle suggest in the middle of line
- [x] ~~add more context to prompt opened buffers outlines (lsp symbols) with types info (lsp signatures) -- contains all of below info~~ doesn't work (llm doesn't undertstand the markdown, and even with just adding opened buffers as context, it starts hallucinating)
  - [x] ~~opened splits outlines~~
  - [x] ~~opened tabs outlines~~
  - [x] ~~lsp info~~
  - [x] ~~imported files outlines~~
- [x] ~~commands~~ decided to let other plugins handle this behavior as it needs an other model and prompt engineering (not the point of this specific plugin to start with)
  - [x] ~~describe~~
  - [x] ~~refactor~~
  - [x] ~~comment~~
  - [x] ~~chat~~
  - [x] ~~commit msg (using git diff --staged + conventional commit rules)~~
